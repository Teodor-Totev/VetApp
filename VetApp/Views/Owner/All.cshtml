@model ICollection<OwnerPatient>

@{
	ViewData["Title"] = "Owner Patients";
}

@if (!Model.Any())
{
	<h3 class="text-center">No owners with this phone number</h3>
}
else
{
	<table class="table table-secondary">
		<thead>
			<tr>
				<th>
					Name
				</th>
				<th>
					Address
				</th>
				<th>
					PhoneNumber
				</th>
				<th>
					Animals
				</th>
			</tr>
		</thead>
		@foreach (var owner in Model)
		{
			<tbody>
				<tr class="table-dark">
					<td>
						@owner.OwnerName
					</td>
					<td>
						@owner.Address
					</td>
					<td>
						@owner.PhoneNumber
					</td>
					<td>
						<select class="form-control" style="max-width: 8em" onclick="handlePatientSelection(this)">
							<option value="">Select a patient</option>
							@foreach (var patient in owner.Patients)
							{
								<option value="@patient.Id">@patient.Name</option>
							}
						</select>
					</td>
				</tr>
			</tbody>
		}
	</table>
}

@section scripts {
	<script>
		function handlePatientSelection(selectElement) {
			var selectedPatientId = selectElement.value;
			// Perform actions based on the selected patient ID
			// For example, display patient details or navigate to patient page
			if (selectedPatientId) {
				// Redirect to the patient details page
				window.location.href = '/Patient/Details/' + selectedPatientId;
			}
		}
	</script>
} 